<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="InterviewAce">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="description" content="AI-powered interview preparation with Live Copilot and intelligent resume builder">
    <title>InterviewAce - AI Interview Copilot & Resume Builder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Space+Mono:wght@400;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html, body { width: 100%; height: 100%; position: fixed; overflow: hidden; }
        
        :root {
            --primary: #ff6500;
            --primary-dark: #cc5100;
            --accent: #00ff88;
            --bg-dark: #0a0a0a;
            --bg-card: #1a1a1a;
            --bg-card-hover: #242424;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --text-muted: #6e6e6e;
            --border: #2a2a2a;
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff3366;
            --safe-area-top: max(0px, env(safe-area-inset-top));
            --safe-area-bottom: max(0px, env(safe-area-inset-bottom));
            --safe-area-left: max(0px, env(safe-area-inset-left));
            --safe-area-right: max(0px, env(safe-area-inset-right));
        }
        
        body {
            font-family: 'Space Mono', monospace;
            background: var(--bg-dark);
            color: var(--text-primary);
            overflow: hidden;
            line-height: 1.6;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .grain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 9999;
            animation: grain 8s steps(10) infinite;
        }
        
        @keyframes grain {
            0%, 100% { transform: translate(0, 0); }
            10% { transform: translate(-5%, -10%); }
            30% { transform: translate(3%, -15%); }
            50% { transform: translate(12%, 9%); }
            70% { transform: translate(9%, 4%); }
            90% { transform: translate(-1%, 7%); }
        }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 0 1rem; width: 100%; }
        
        .header {
            position: relative;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--border);
            padding: 0.75rem 0;
            z-index: 1000;
            padding-top: calc(0.75rem + var(--safe-area-top));
            padding-right: var(--safe-area-right);
            padding-left: var(--safe-area-left);
            flex-shrink: 0;
        }
        
        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 100%;
            margin: 0 auto;
            padding: 0 1.5rem;
            width: 100%;
        }
        
        .logo {
            font-family: 'Syne', sans-serif;
            font-size: clamp(20px, 5vw, 28px);
            font-weight: 800;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: -1px;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .nav-right { display: flex; align-items: center; gap: 2.5rem; }
        .desktop-nav { display: none; gap: 2.5rem; align-items: center; }
        @media (min-width: 768px) { .desktop-nav { display: flex; } }
        
        .nav-links { display: none; gap: 20px; align-items: center; }
        .nav-links.mobile-open {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            flex-direction: column;
            background: var(--bg-dark);
            padding-top: calc(60px + var(--safe-area-top));
            padding-left: var(--safe-area-left);
            padding-right: var(--safe-area-right);
            padding-bottom: var(--safe-area-bottom);
            gap: 10px;
            z-index: 999;
        }
        
        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 13px;
            transition: color 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            cursor: pointer;
            padding: 0.5rem 0;
            border-bottom: 2px solid transparent;
            white-space: nowrap;
            font-weight: 600;
        }
        
        .nav-links.mobile-open .nav-link { font-size: 18px; padding: 1.25rem; }
        .nav-link:hover, .nav-link.active { color: var(--primary); border-bottom-color: var(--primary); }
        
        .hamburger {
            display: flex;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 24px;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
            width: 44px;
            height: 44px;
            align-items: center;
            justify-content: center;
            margin: 0;
            flex-shrink: 0;
        }
        
        .hamburger.active { color: var(--primary); }
        @media (min-width: 768px) { .hamburger { display: none; } }
        
        .page-container {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding-bottom: var(--safe-area-bottom);
        }
        
        .page-section { display: none; padding: 1.5rem 0; min-height: 100%; }
        .page-section.active { display: block; }
        
        .hero { padding: 2rem 0 1.5rem; text-align: center; position: relative; }
        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 20%, rgba(255, 101, 0, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 70% 80%, rgba(0, 255, 136, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }
        
        h1 {
            font-family: 'Syne', sans-serif;
            font-size: clamp(36px, 8vw, 96px);
            font-weight: 800;
            line-height: 1;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-subtitle {
            font-size: clamp(14px, 3vw, 20px);
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 2rem;
            padding: 0 1rem;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 44px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }
        
        .btn-primary { background: var(--primary); color: var(--bg-dark); }
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 101, 0, 0.3);
        }
        
        .btn-secondary { background: transparent; color: var(--text-primary); border: 2px solid var(--border); }
        .btn-secondary:hover { border-color: var(--primary); color: var(--primary); }
        
        .btn-ghost {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s;
            min-height: 44px;
            width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-full { width: 100%; }
        .btn-grid { display: flex; flex-direction: column; gap: 0.75rem; }
        @media (min-width: 640px) { .btn-grid { flex-direction: row; } }
        .btn-grid .btn { flex: 1; }
        
        .features-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.25rem;
            margin-top: 2rem;
        }
        
        @media (min-width: 640px) {
            .features-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        }
        
        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transform: scaleX(0);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            background: var(--bg-card-hover);
            border-color: var(--primary);
            transform: translateY(-4px);
        }
        
        .feature-card:hover::before { transform: scaleX(1); }
        
        .feature-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.25rem;
            font-size: 24px;
        }
        
        .feature-title {
            font-family: 'Syne', sans-serif;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .feature-description { color: var(--text-secondary); font-size: 13px; line-height: 1.5; }
        .section-header { margin-bottom: 2rem; }
        .section-title {
            font-family: 'Syne', sans-serif;
            font-size: clamp(28px, 5vw, 48px);
            font-weight: 700;
            margin-bottom: 0.75rem;
        }
        
        .section-description { color: var(--text-secondary); font-size: 14px; }
        
        /* Copilot Styles */
        .copilot-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .copilot-header {
            background: var(--bg-dark);
            border-bottom: 1px solid var(--border);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex-shrink: 0;
        }
        
        .status-indicator { display: flex; align-items: center; gap: 0.75rem; font-size: 12px; }
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--text-secondary);
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .status-dot.active { background: var(--success); animation: pulse 2s infinite; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
            50% { opacity: 0.8; box-shadow: 0 0 0 10px rgba(0, 255, 136, 0); }
        }
        
        .status-text {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            transition: color 0.3s;
        }
        
        .status-text.active { color: var(--success); }
        
        .copilot-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
        @media (min-width: 640px) {
            .copilot-controls { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
        }
        
        .control-btn {
            padding: 0.75rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: 'Space Mono', monospace;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            min-height: 40px;
            white-space: nowrap;
        }
        
        .control-btn:hover { border-color: var(--primary); }
        .control-btn.active {
            background: var(--primary);
            color: var(--bg-dark);
            border-color: var(--primary);
        }
        
        .copilot-content { display: grid; grid-template-columns: 1fr; flex: 1; overflow: hidden; }
        @media (min-width: 968px) {
            .copilot-content { grid-template-columns: 1fr 350px; }
        }
        
        .conversation-area { padding: 1rem; display: flex; flex-direction: column; overflow: hidden; }
        @media (min-width: 968px) {
            .conversation-area { border-right: 1px solid var(--border); }
        }
        
        .messages-container {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            margin-bottom: 1rem;
            padding-right: 0.5rem;
        }
        
        .message { margin-bottom: 1rem; padding: 1rem; border-radius: 8px; animation: slideIn 0.3s ease-out; }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .message.question { background: rgba(255, 101, 0, 0.1); border-left: 3px solid var(--primary); }
        .message.suggestion { background: rgba(0, 255, 136, 0.1); border-left: 3px solid var(--accent); }
        
        .message-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }
        
        .message-text { font-size: 13px; line-height: 1.6; word-break: break-word; }
        .input-area { display: flex; gap: 0.75rem; flex-shrink: 0; }
        
        .message-input {
            flex: 1;
            padding: 0.75rem 1rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Space Mono', monospace;
            font-size: 14px;
            min-height: 44px;
            resize: none;
        }
        
        .message-input:focus { outline: none; border-color: var(--primary); }
        
        .sidebar {
            padding: 1rem;
            background: var(--bg-dark);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            border-top: 1px solid var(--border);
            display: none;
        }
        
        @media (min-width: 968px) {
            .sidebar { display: block; border-top: none; }
        }
        
        .sidebar-section { margin-bottom: 1.5rem; }
        .sidebar-title {
            font-family: 'Syne', sans-serif;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .quick-answer {
            padding: 0.75rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            min-height: 40px;
            display: flex;
            align-items: center;
        }
        
        .quick-answer:hover { background: var(--bg-card-hover); border-color: var(--primary); }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 12px;
        }
        
        .stat-value { color: var(--accent); font-weight: 700; }
        
        /* Context Drawer */
        .context-drawer {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            max-width: 380px;
            background: var(--bg-card);
            border-left: 1px solid var(--border);
            box-shadow: -10px 0 30px rgba(0,0,0,0.5);
            z-index: 2000;
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 1.5rem;
            padding-top: calc(1.5rem + var(--safe-area-top));
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .context-drawer.open { transform: translateX(0); }
        
        .context-drawer .input {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: 'Space Mono', monospace;
            font-size: 12px;
            resize: vertical;
            margin-bottom: 0.5rem;
            min-height: 44px;
        }
        
        .context-drawer .input:focus { outline: none; border-color: var(--primary); }
        
        /* Enhanced Resume Builder Styles */
        .resume-builder-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; }
        @media (min-width: 1024px) {
            .resume-builder-grid { grid-template-columns: 400px 1fr; }
        }
        
        .builder-sidebar {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 1rem;
        }
        
        .input-section { margin-bottom: 1.5rem; }
        .section-label {
            font-family: 'Syne', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .voice-input-area { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .voice-textarea {
            flex: 1;
            min-height: 120px;
            padding: 1rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Space Mono', monospace;
            font-size: 13px;
            resize: vertical;
        }
        
        .voice-textarea:focus { outline: none; border-color: var(--primary); }
        
        .mic-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            color: var(--text-primary);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .mic-btn:hover { border-color: var(--primary); background: var(--primary); color: var(--bg-dark); }
        .mic-btn.recording { background: var(--error); border-color: var(--error); animation: pulse-mic 1.5s infinite; }
        
        @keyframes pulse-mic {
            0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(255, 51, 102, 0.7); }
            50% { opacity: 0.8; box-shadow: 0 0 0 10px rgba(255, 51, 102, 0); }
        }
        
        .input-group { margin-bottom: 1rem; }
        .input-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .input-field, .select-field {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Space Mono', monospace;
            font-size: 13px;
            min-height: 44px;
        }
        
        .input-field:focus, .select-field:focus { outline: none; border-color: var(--primary); }
        
        .color-schemes { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 1rem; }
        .color-scheme {
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .color-scheme:hover { border-color: var(--primary); background: var(--bg-card-hover); }
        .color-scheme.active { border-color: var(--primary); background: rgba(255, 101, 0, 0.1); }
        .color-preview { display: flex; gap: 4px; margin-bottom: 0.5rem; }
        .color-dot { width: 16px; height: 16px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.2); }
        .color-name { font-size: 10px; font-weight: 600; color: var(--text-primary); }
        
        .template-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin-bottom: 1rem; }
        .template-option {
            padding: 1rem;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .template-option:hover { border-color: var(--primary); background: var(--bg-card-hover); }
        .template-option.active { border-color: var(--primary); background: rgba(255, 101, 0, 0.1); }
        .template-icon { font-size: 24px; margin-bottom: 0.5rem; }
        .template-name { font-size: 11px; font-weight: 600; color: var(--text-primary); }
        
        .slider-group { margin-bottom: 1rem; }
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .slider-value { font-size: 14px; font-weight: 600; color: var(--primary); }
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--bg-dark);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: none;
        }
        
        .preview-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            min-height: 600px;
        }
        
        .stats-bar {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-card);
            border-radius: 8px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .stat { flex: 1; min-width: 100px; }
        .stat-label { font-size: 10px; color: var(--text-secondary); text-transform: uppercase; }
        .stat-value-large { font-size: 18px; font-weight: 700; color: var(--primary); }
        
        .resumes-grid { display: grid; grid-template-columns: 1fr; gap: 2rem; }
        @media (min-width: 768px) {
            .resumes-grid { grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); }
        }
        
        .resume-card {
            background: white;
            border-radius: 12px;
            padding: 0;
            color: #000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            min-height: 700px;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .resume-actions {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            background: var(--bg-dark);
            border-radius: 0 0 12px 12px;
        }
        
        .resume-actions .btn { flex: 1; padding: 0.75rem; font-size: 11px; }
        
        .generating-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 10, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 1.25rem;
            z-index: 10000;
        }
        
        .generating-overlay.active { display: flex; }
        .loading {
            display: inline-block;
            width: 60px;
            height: 60px;
            border: 6px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        .generating-text { font-size: 18px; color: var(--primary); font-family: 'Syne', sans-serif; }
        .generating-progress { color: var(--text-secondary); font-size: 12px; }
        
        /* Settings Modal */
        .settings-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 1rem;
        }
        
        .settings-overlay.active { display: flex; }
        .settings-modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            max-width: 100%;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
        }
        
        @media (min-width: 640px) {
            .settings-modal { max-width: 600px; max-height: 90vh; }
        }
        
        .settings-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: var(--bg-card);
            z-index: 100;
        }
        
        .settings-title {
            font-family: 'Syne', sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 28px;
            cursor: pointer;
            padding: 0;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: all 0.3s;
        }
        
        .close-btn:hover { background: var(--bg-card-hover); color: var(--primary); }
        
        .settings-content { padding: 1.5rem; }
        .settings-section { margin-bottom: 2rem; }
        .settings-section-title {
            font-family: 'Syne', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        .settings-section-desc {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .ai-provider-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .provider-card {
            padding: 1rem;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .provider-card:hover { border-color: var(--primary); background: var(--bg-card-hover); }
        .provider-card.active { border-color: var(--primary); background: rgba(255, 101, 0, 0.1); }
        .provider-icon { font-size: 28px; margin-bottom: 0.5rem; }
        .provider-name {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .provider-model { font-size: 10px; color: var(--text-secondary); }
        .status-badge {
            display: inline-block;
            padding: 0.5rem 0.75rem;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .status-badge.active { background: rgba(0, 255, 136, 0.2); color: var(--success); }
        .status-badge.demo { background: rgba(255, 170, 0, 0.2); color: var(--warning); }
        .help-text { font-size: 11px; color: var(--text-secondary); margin-top: 0.5rem; }
        .help-text code { background: var(--bg-dark); padding: 2px 6px; border-radius: 3px; font-family: 'Space Mono', monospace; font-size: 10px; }
        .help-link { color: var(--primary); text-decoration: none; }
        
        .settings-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
            position: sticky;
            bottom: 0;
            background: var(--bg-card);
        }
        
        .settings-footer .btn { flex: 1; min-width: 120px; }
        .settings-icon {
            font-size: 20px;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.3s;
            color: var(--text-secondary);
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .settings-icon:hover { background: var(--bg-card-hover); color: var(--primary); }
    </style>
</head>
<body>
    <div class="grain-overlay"></div>
    
    <div class="generating-overlay" id="generatingOverlay">
        <div class="loading"></div>
        <div class="generating-text" id="generatingText">Generating...</div>
        <div class="generating-progress" id="generatingProgress">Please wait...</div>
    </div>
    
    <!-- Settings Modal -->
    <div class="settings-overlay" id="settingsOverlay">
        <div class="settings-modal">
            <div class="settings-header">
                <div class="settings-title">‚öôÔ∏è Settings</div>
                <button class="close-btn" onclick="closeSettings()">√ó</button>
            </div>
            <div class="settings-content">
                <div class="settings-section">
                    <div class="settings-section-title">Current Mode: <span id="currentMode" class="status-badge demo">Demo Mode</span></div>
                </div>
                <div class="settings-section">
                    <div class="settings-section-title">ü§ñ AI Provider</div>
                    <div class="settings-section-desc">Select your preferred AI provider</div>
                    <div class="ai-provider-grid">
                        <div class="provider-card" onclick="selectProvider('openai')" id="provider-openai">
                            <div class="provider-icon">üü¢</div>
                            <div class="provider-name">OpenAI</div>
                            <div class="provider-model">GPT-5.2</div>
                        </div>
                        <div class="provider-card" onclick="selectProvider('anthropic')" id="provider-anthropic">
                            <div class="provider-icon">üü£</div>
                            <div class="provider-name">Anthropic</div>
                            <div class="provider-model">Claude 3.5</div>
                        </div>
                        <div class="provider-card" onclick="selectProvider('google')" id="provider-google">
                            <div class="provider-icon">üîµ</div>
                            <div class="provider-name">Google</div>
                            <div class="provider-model">Gemini Flash</div>
                        </div>
                        <div class="provider-card" onclick="selectProvider('ollama')" id="provider-ollama">
                            <div class="provider-icon">ü¶ô</div>
                            <div class="provider-name">Ollama</div>
                            <div class="provider-model">Local Models</div>
                        </div>
                        <div class="provider-card active" onclick="selectProvider('demo')" id="provider-demo">
                            <div class="provider-icon">üé≠</div>
                            <div class="provider-name">Demo</div>
                            <div class="provider-model">Pre-programmed</div>
                        </div>
                    </div>
                </div>
                <div class="settings-section" id="apiKeySection">
                    <div class="settings-section-title">üîë API Configuration</div>
                    <div id="ollamaNotice" style="display:none;background:rgba(255,170,0,0.1);border-left:3px solid var(--warning);padding:1rem;margin-bottom:1rem;border-radius:4px;">
                        <div style="font-size:11px;font-weight:600;color:var(--warning);margin-bottom:0.5rem;">‚ö†Ô∏è CORS Setup Required for Ollama</div>
                        <div style="font-size:10px;color:var(--text-secondary);line-height:1.6;">
                            Run Ollama with CORS enabled:<br>
                            <code style="background:var(--bg-dark);padding:4px 8px;border-radius:3px;display:inline-block;margin-top:4px;font-size:9px;">OLLAMA_ORIGINS=* ollama serve</code><br><br>
                            Or use a CORS proxy in the endpoint field:<br>
                            <code style="background:var(--bg-dark);padding:4px 8px;border-radius:3px;display:inline-block;margin-top:4px;font-size:9px;">https://corsproxy.io/?http://localhost:11434</code>
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">API Key / Endpoint URL</label>
                        <input type="password" class="input-field" id="apiKeyInput" placeholder="sk-... or http://localhost:11434" />
                        <div class="help-text">Your API key or Ollama endpoint URL is stored locally.</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Custom Model (Optional)</label>
                        <input type="text" class="input-field" id="modelInput" placeholder="Model name" />
                        <div class="help-text" id="providerHelp">Get your API key from OpenAI Dashboard</div>
                    </div>
                </div>
            </div>
            <div class="settings-footer">
                <button class="btn btn-secondary" onclick="clearSettings()">Clear All</button>
                <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
            </div>
        </div>
    </div>
    
    <header class="header">
        <div class="nav-content">
            <div class="logo" onclick="navigate('home')">InterviewAce</div>
            
            <div class="nav-right">
                <div class="desktop-nav">
                    <a class="nav-link active" onclick="navigate('home')">Home</a>
                    <a class="nav-link" onclick="navigate('copilot')">Live Copilot</a>
                    <a class="nav-link" onclick="navigate('resume')">Resume Builder</a>
                </div>
                
                <nav class="nav-links" id="navLinks">
                    <a class="nav-link active" onclick="navigate('home')">Home</a>
                    <a class="nav-link" onclick="navigate('copilot')">Live Copilot</a>
                    <a class="nav-link" onclick="navigate('resume')">Resume Builder</a>
                </nav>
                
                <button class="hamburger" id="hamburger" onclick="toggleMobileMenu()">‚ò∞</button>
                <span class="settings-icon" onclick="openSettings()" title="Settings">‚öôÔ∏è</span>
            </div>
        </div>
    </header>
    
    <div class="page-container">
        <!-- Home Page -->
        <section id="home" class="page-section active">
            <div class="hero">
                <div class="hero-bg"></div>
                <div class="container">
                    <div style="position: relative; z-index: 1; text-align: center;">
                        <h1>ACE YOUR<br>NEXT INTERVIEW</h1>
                        <p class="hero-subtitle">AI-powered interview assistant with live copilot & intelligent resume builder</p>
                        <div class="btn-grid" style="margin-top: 2rem; max-width: 500px; margin-left: auto; margin-right: auto;">
                            <button class="btn btn-primary" onclick="navigate('copilot')">Start Live Copilot</button>
                            <button class="btn btn-secondary" onclick="navigate('resume')">Build Resumes</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="features-grid">
                    <div class="feature-card" onclick="navigate('copilot')">
                        <div class="feature-icon">üéØ</div>
                        <h3 class="feature-title">Live Interview Copilot</h3>
                        <p class="feature-description">Real-time voice & AI assistance during interviews with stealth mode</p>
                    </div>
                    <div class="feature-card" onclick="navigate('resume')">
                        <div class="feature-icon">üìÑ</div>
                        <h3 class="feature-title">Professional Resume Builder</h3>
                        <p class="feature-description">AI-powered ATS-friendly resumes with 6 templates & multiple variations</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üé§</div>
                        <h3 class="feature-title">Voice Input</h3>
                        <p class="feature-description">Hands-free voice-to-text for interviews and resume building</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Live Copilot Page -->
        <section id="copilot" class="page-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Live Interview Copilot</h2>
                    <p class="section-description">Real-time AI assistance with voice recognition</p>
                </div>
                <div class="copilot-card">
                    <div class="copilot-header">
                        <div class="status-indicator">
                            <div class="status-dot" id="statusDot"></div>
                            <span class="status-text" id="statusText">Standby</span>
                            <span style="margin-left: 10px;">|</span>
                            <span id="aiModeIndicator" class="status-badge demo" style="margin-left: 10px;">Demo Mode</span>
                        </div>
                        <div class="copilot-controls">
                            <button class="control-btn" id="btnListen" onclick="toggleListen()"><i class="fa-solid fa-microphone"></i> Listening: OFF</button>
                            <button class="control-btn" id="btnStealth" onclick="toggleStealth()"><i class="fa-solid fa-eye-slash"></i> Stealth: OFF</button>
                            <button class="control-btn" id="btnType" onclick="cycleType()"><i class="fa-solid fa-briefcase"></i> Behavioral</button>
                            <button class="control-btn" id="btnContext" onclick="ui.toggleContext()"><i class="fa-solid fa-book"></i> Context</button>
                        </div>
                    </div>
                    <!-- Context Drawer -->
                    <div id="context-drawer" class="context-drawer">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                            <strong style="color:var(--text-primary); font-family:'Syne', sans-serif; font-size: 16px;">
                                <i class="fa-solid fa-book" style="color:var(--primary); margin-right: 0.5rem;"></i> Context Data
                            </strong>
                            <button class="btn-ghost" onclick="ui.toggleContext(false)"><i class="fa-solid fa-chevron-down"></i></button>
                        </div>
                        <div style="display:grid; gap:1.5rem;">
                            <div>
                                <label style="font-size:0.75rem; font-weight:600; color:var(--text-muted); text-transform: uppercase;">YOUR RESUME</label>
                                <textarea id="ctx-resume" class="input" rows="6" placeholder="Paste resume text here..." oninput="state.saveContext()"></textarea>
                            </div>
                            <div>
                                <label style="font-size:0.75rem; font-weight:600; color:var(--text-muted); text-transform: uppercase;">JOB DESCRIPTION</label>
                                <textarea id="ctx-jd" class="input" rows="6" placeholder="Paste job description here..." oninput="state.saveContext()"></textarea>
                            </div>
                        </div>
                        <div style="text-align:right; margin-top:1.5rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                            <span id="context-status" style="font-size: 11px; color: var(--text-secondary); margin-right: 1rem;">No data saved</span>
                            <button class="btn btn-primary" style="font-size:0.75rem; padding: 0.5rem 1rem;" onclick="ui.toggleContext(false)">Done</button>
                        </div>
                    </div>
                    <div class="copilot-content">
                        <div class="conversation-area">
                            <div class="messages-container" id="messages">
                                <div class="message suggestion">
                                    <div class="message-label">Welcome</div>
                                    <div class="message-text"><strong>Live Copilot Ready!</strong><br><br><strong>‚öôÔ∏è Quick Start:</strong><br>1. Click ‚öôÔ∏è to configure AI<br>2. Add API key for intelligent responses<br>3. Or use Demo Mode<br><br><strong>üìù Context Drawer:</strong><br>Click "Context" to upload Resume & Job Description<br><br><strong>Voice Features:</strong><br>‚Ä¢ Enable voice recognition<br>‚Ä¢ Enable stealth mode<br><em>üí° Click ‚öôÔ∏è to activate AI mode!</em></div>
                                </div>
                            </div>
                            <div class="input-area">
                                <input type="text" class="message-input" id="queryInput" placeholder="Type a question...">
                                <button class="btn btn-primary" onclick="sendQuery()">Send</button>
                            </div>
                        </div>
                        <div class="sidebar">
                            <div class="sidebar-section">
                                <h4 class="sidebar-title">Quick Answers</h4>
                                <div class="quick-answer" onclick="quickAnswer('strength')">üí™ My Strengths</div>
                                <div class="quick-answer" onclick="quickAnswer('weakness')">üéØ My Weaknesses</div>
                                <div class="quick-answer" onclick="quickAnswer('why')">üè¢ Why This Company</div>
                                <div class="quick-answer" onclick="quickAnswer('achievement')">üèÜ Top Achievement</div>
                            </div>
                            <div class="sidebar-section">
                                <h4 class="sidebar-title">Session Stats</h4>
                                <div class="stat-item"><span>Questions Assisted</span><span class="stat-value" id="questionCount">0</span></div>
                                <div class="stat-item"><span>Duration</span><span class="stat-value" id="duration">00:00</span></div>
                                <div class="stat-item"><span>Voice Active</span><span class="stat-value" id="voiceStatus">No</span></div>
                                <div class="stat-item"><span>Stealth Mode</span><span class="stat-value" id="stealthStatus">Off</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Enhanced Resume Builder Page -->
        <section id="resume" class="page-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Professional Resume Generator</h2>
                    <p class="section-description">AI-powered ATS-friendly resumes with multiple variations & modern designs</p>
                </div>
                
                <div class="resume-builder-grid">
                    <!-- Sidebar Controls -->
                    <div class="builder-sidebar">
                        <!-- Background Input -->
                        <div class="input-section">
                            <div class="section-label">
                                <i class="fa-solid fa-user"></i> Your Background
                            </div>
                            <div class="voice-input-area">
                                <textarea class="voice-textarea" id="resumeInput" placeholder="Describe your professional background:
Example: 8 years software engineering, Java/Python/AWS, led teams of 5-10 developers, built scalable systems serving 10M+ users, improved performance 40%, reduced costs $200K annually...

Include: experience, skills, achievements, education, certifications"></textarea>
                                <button class="mic-btn" id="resumeMicBtn" onclick="toggleResumeVoice()" title="Voice Input">üé§</button>
                            </div>
                        </div>
                        
                        <!-- Target Role -->
                        <div class="input-section">
                            <div class="section-label">
                                <i class="fa-solid fa-briefcase"></i> Target Role
                            </div>
                            <div class="input-group">
                                <input type="text" class="input-field" id="targetRole" placeholder="e.g., Senior Software Engineer, Product Manager">
                            </div>
                        </div>
                        
                        <!-- Job Category -->
                        <div class="input-section">
                            <div class="section-label">
                                <i class="fa-solid fa-layer-group"></i> Industry
                            </div>
                            <select class="select-field" id="jobCategory">
                                <option value="it">IT & Technology</option>
                                <option value="engineering">Engineering</option>
                                <option value="sales">Sales & Business Development</option>
                                <option value="marketing">Marketing & Communications</option>
                                <option value="finance">Finance & Accounting</option>
                                <option value="hr">Human Resources</option>
                                <option value="operations">Operations & Supply Chain</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="education">Education</option>
                                <option value="creative">Creative & Design</option>
                            </select>
                        </div>
                        
                        <!-- Resume Variations -->
                        <div class="input-section">
                            <div class="section-label">
                                <i class="fa-solid fa-copy"></i> Variations
                            </div>
                            <div class="slider-group">
                                <div class="slider-header">
                                    <span class="input-label">Number of Versions</span>
                                    <span class="slider-value" id="variationsValue">3</span>
                                </div>
                                <input type="range" min="1" max="6" value="3" class="slider" id="variationsSlider" oninput="updateSlider('variations')">
                            </div>
                        </div>
                        
                        <!-- Pages -->
                        <div class="input-section">
                            <div class="section-label">
                                <i class="fa-solid fa-file"></i> Pages
                            </div>
                            <div class="slider-group">
                                <div class="slider-header">
                                    <span class="input-label">Number of Pages</span>
                                    <span class="slider-value" id="pagesValue">2</span>
                                </div>
                                <input type="range" min="1" max="3" value="2" class="slider" id="pagesSlider" oninput="updateSlider('pages')">
                            </div>
                        </div>
                        
                        <!-- Color Scheme -->
                        <div class="input-section">
                            <div class="section-label">
                                <i class="fa-solid fa-palette"></i> Color Schemes
                            </div>
                            <div class="color-schemes">
                                <div class="color-scheme active" data-scheme="professional" onclick="selectColorScheme('professional')">
                                    <div class="color-preview">
                                        <div class="color-dot" style="background: #2c3e50;"></div>
                                        <div class="color-dot" style="background: #3498db;"></div>
                                    </div>
                                    <div class="color-name">Professional</div>
                                </div>
                                <div class="color-scheme" data-scheme="modern" onclick="selectColorScheme('modern')">
                                    <div class="color-preview">
                                        <div class="color-dot" style="background: #e74c3c;"></div>
                                        <div class="color-dot" style="background: #9b59b6;"></div>
                                    </div>
                                    <div class="color-name">Modern</div>
                                </div>
                                <div class="color-scheme" data-scheme="elegant" onclick="selectColorScheme('elegant')">
                                    <div class="color-preview">
                                        <div class="color-dot" style="background: #1a1a1a;"></div>
                                        <div class="color-dot" style="background: #d4af37;"></div>
                                    </div>
                                    <div class="color-name">Elegant</div>
                                </div>
                                <div class="color-scheme" data-scheme="creative" onclick="selectColorScheme('creative')">
                                    <div class="color-preview">
                                        <div class="color-dot" style="background: #ff6b6b;"></div>
                                        <div class="color-dot" style="background: #4ecdc4;"></div>
                                    </div>
                                    <div class="color-name">Creative</div>
                                </div>
                                <div class="color-scheme" data-scheme="minimal" onclick="selectColorScheme('minimal')">
                                    <div class="color-preview">
                                        <div class="color-dot" style="background: #333;"></div>
                                        <div class="color-dot" style="background: #777;"></div>
                                    </div>
                                    <div class="color-name">Minimal</div>
                                </div>
                                <div class="color-scheme" data-scheme="vibrant" onclick="selectColorScheme('vibrant')">
                                    <div class="color-preview">
                                        <div class="color-dot" style="background: #ff6500;"></div>
                                        <div class="color-dot" style="background: #00ff88;"></div>
                                    </div>
                                    <div class="color-name">Vibrant</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Template Style -->
                        <div class="input-section">
                            <div class="section-label">
                                <i class="fa-solid fa-shapes"></i> Layout Templates
                            </div>
                            <div class="template-grid">
                                <div class="template-option active" data-template="ats" onclick="selectTemplate('ats')">
                                    <div class="template-icon">üìÑ</div>
                                    <div class="template-name">ATS Classic</div>
                                </div>
                                <div class="template-option" data-template="modern" onclick="selectTemplate('modern')">
                                    <div class="template-icon">üé®</div>
                                    <div class="template-name">Modern</div>
                                </div>
                                <div class="template-option" data-template="sidebar" onclick="selectTemplate('sidebar')">
                                    <div class="template-icon">üìä</div>
                                    <div class="template-name">Sidebar</div>
                                </div>
                                <div class="template-option" data-template="executive" onclick="selectTemplate('executive')">
                                    <div class="template-icon">üíº</div>
                                    <div class="template-name">Executive</div>
                                </div>
                                <div class="template-option" data-template="creative" onclick="selectTemplate('creative')">
                                    <div class="template-icon">‚ú®</div>
                                    <div class="template-name">Creative</div>
                                </div>
                                <div class="template-option" data-template="compact" onclick="selectTemplate('compact')">
                                    <div class="template-icon">üìã</div>
                                    <div class="template-name">Compact</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Generate Button -->
                        <button class="btn btn-primary btn-full" onclick="generateResumes()" style="padding: 1rem; font-size: 14px;">
                            <i class="fa-solid fa-wand-magic-sparkles"></i>&nbsp;&nbsp;Generate Professional Resumes
                        </button>
                    </div>
                    
                    <!-- Preview Area -->
                    <div class="preview-container">
                        <div class="stats-bar" id="statsBar" style="display: none;">
                            <div class="stat">
                                <div class="stat-label">Generated</div>
                                <div class="stat-value-large" id="generatedCount">0</div>
                            </div>
                            <div class="stat">
                                <div class="stat-label">ATS Score</div>
                                <div class="stat-value-large" id="atsScore">--</div>
                            </div>
                            <div class="stat">
                                <div class="stat-label">Variations</div>
                                <div class="stat-value-large" id="variationsCount">0</div>
                            </div>
                        </div>
                        
                        <div class="resumes-grid" id="resumesGrid">
                            <div style="text-align: center; padding: 4rem 2rem; color: var(--text-secondary);">
                                <div style="font-size: 64px; margin-bottom: 1rem;">üìÑ</div>
                                <div style="font-size: 18px; font-weight: 600; margin-bottom: 0.5rem;">Ready to Generate</div>
                                <div style="font-size: 14px;">Fill in your details and click "Generate Professional Resumes"</div>
                                <div style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-card); border-radius: 8px; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto;">
                                    <div style="font-weight: 600; margin-bottom: 1rem; color: var(--primary);">‚ú® Features:</div>
                                    <ul style="list-style: none; padding: 0; font-size: 13px; line-height: 2;">
                                        <li>‚úì 6 Professional Templates (ATS, Modern, Sidebar, Executive, Creative, Compact)</li>
                                        <li>‚úì 6 Color Schemes</li>
                                        <li>‚úì 1-6 Resume Variations</li>
                                        <li>‚úì 1-3 Page Options</li>
                                        <li>‚úì 10 Industry Categories</li>
                                        <li>‚úì ATS-Optimized Formats</li>
                                        <li>‚úì Voice Input Support</li>
                                        <li>‚úì Export to PDF & Copy</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        const state = {
            currentPage: 'home',
            isListening: false,
            stealthMode: false,
            interviewType: 0,
            types: ['Behavioral', 'Technical', 'Case Study', 'Coding'],
            questionCount: 0,
            sessionStart: null,
            recognition: null,
            isRecording: false,
            resumeRecognition: null,
            aiSettings: { provider: 'demo', apiKey: '', model: '' },
            contextResume: '',
            contextJD: '',
            selectedColorScheme: 'professional',
            selectedTemplate: 'ats',
            variations: 3,
            pages: 2
        };
        
        const colorSchemes = {
            professional: { primary: '#2c3e50', secondary: '#3498db', accent: '#ecf0f1' },
            modern: { primary: '#e74c3c', secondary: '#9b59b6', accent: '#f8f9fa' },
            elegant: { primary: '#1a1a1a', secondary: '#d4af37', accent: '#f5f5f5' },
            creative: { primary: '#ff6b6b', secondary: '#4ecdc4', accent: '#ffe66d' },
            minimal: { primary: '#333333', secondary: '#777777', accent: '#ffffff' },
            vibrant: { primary: '#ff6500', secondary: '#00ff88', accent: '#f0f0f0' }
        };
        
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const hamburger = document.getElementById('hamburger');
            navLinks.classList.toggle('mobile-open');
            hamburger.classList.toggle('active');
        }
        
        function closeMobileMenu() {
            document.getElementById('navLinks').classList.remove('mobile-open');
            document.getElementById('hamburger').classList.remove('active');
        }
        
        function loadSettings() {
            try {
                const saved = localStorage.getItem('interviewace_settings');
                if (saved) {
                    const settings = JSON.parse(saved);
                    state.aiSettings = { ...state.aiSettings, ...settings };
                    updateSettingsUI();
                    updateModeDisplay();
                }
            } catch (e) { console.error('Error loading settings:', e); }
        }
        
        function saveSettings() {
            state.aiSettings = {
                provider: state.aiSettings.provider,
                apiKey: document.getElementById('apiKeyInput').value.trim(),
                model: document.getElementById('modelInput').value.trim()
            };
            try {
                localStorage.setItem('interviewace_settings', JSON.stringify(state.aiSettings));
                updateModeDisplay();
                closeSettings();
                alert('‚úÖ Settings saved!');
            } catch (e) {
                alert('Error: ' + e.message);
            }
        }
        
        function clearSettings() {
            if (confirm('Clear all settings?')) {
                localStorage.removeItem('interviewace_settings');
                state.aiSettings = { provider: 'demo', apiKey: '', model: '' };
                updateSettingsUI();
                updateModeDisplay();
                alert('Settings cleared!');
            }
        }
        
        function openSettings() {
            updateSettingsUI();
            document.getElementById('settingsOverlay').classList.add('active');
        }
        
        function closeSettings() {
            document.getElementById('settingsOverlay').classList.remove('active');
        }
        
        function selectProvider(provider) {
            state.aiSettings.provider = provider;
            document.querySelectorAll('.provider-card').forEach(card => card.classList.remove('active'));
            document.getElementById('provider-' + provider).classList.add('active');
            const apiSection = document.getElementById('apiKeySection');
            apiSection.style.display = provider === 'demo' ? 'none' : 'block';
            
            // Show/hide Ollama notice
            const ollamaNotice = document.getElementById('ollamaNotice');
            if (ollamaNotice) {
                ollamaNotice.style.display = provider === 'ollama' ? 'block' : 'none';
            }
            
            // Update label based on provider
            const keyLabel = document.querySelector('#apiKeySection .input-label');
            if (provider === 'ollama') {
                keyLabel.textContent = 'Endpoint URL';
                document.getElementById('apiKeyInput').placeholder = 'http://localhost:11434';
            } else {
                keyLabel.textContent = 'API Key';
                document.getElementById('apiKeyInput').placeholder = 'sk-...';
            }
            
            if (provider !== 'demo') updateProviderHelp(provider);
        }
        
        function updateProviderHelp(provider) {
            const helpText = document.getElementById('providerHelp');
            const modelInput = document.getElementById('modelInput');
            const info = {
                openai: { link: 'https://platform.openai.com/api-keys', name: 'OpenAI Dashboard', model: 'gpt-5.2' },
                anthropic: { link: 'https://console.anthropic.com/settings/keys', name: 'Anthropic Console', model: 'claude-3-5-sonnet-20241022' },
                google: { link: 'https://makersuite.google.com/app/apikey', name: 'Google AI Studio', model: 'gemini-flash' },
                ollama: { link: 'https://ollama.ai/', name: 'Ollama Setup Guide', model: 'llama3.2', help: 'Run Ollama with CORS: <code style="background:#2a2a2a;padding:2px 6px;border-radius:3px;font-size:10px;">OLLAMA_ORIGINS=* ollama serve</code>' }
            }[provider];
            if (info) {
                if (provider === 'ollama') {
                    helpText.innerHTML = `${info.help || 'Run Ollama locally.'} Visit: <a href="${info.link}" target="_blank" class="help-link">${info.name}</a>`;
                } else {
                    helpText.innerHTML = `Get your API key from: <a href="${info.link}" target="_blank" class="help-link">${info.name}</a>`;
                }
                modelInput.placeholder = info.model;
            }
        }
        
        function updateSettingsUI() {
            const { provider, apiKey, model } = state.aiSettings;
            document.querySelectorAll('.provider-card').forEach(card => card.classList.remove('active'));
            document.getElementById('provider-' + provider).classList.add('active');
            document.getElementById('apiKeyInput').value = apiKey;
            document.getElementById('modelInput').value = model;
            const apiSection = document.getElementById('apiKeySection');
            apiSection.style.display = provider === 'demo' ? 'none' : 'block';
            
            // Show/hide Ollama notice
            const ollamaNotice = document.getElementById('ollamaNotice');
            if (ollamaNotice) {
                ollamaNotice.style.display = provider === 'ollama' ? 'block' : 'none';
            }
            
            // Update label based on provider
            const keyLabel = document.querySelector('#apiKeySection .input-label');
            if (provider === 'ollama') {
                keyLabel.textContent = 'Endpoint URL';
                document.getElementById('apiKeyInput').placeholder = 'http://localhost:11434';
            } else {
                keyLabel.textContent = 'API Key';
                document.getElementById('apiKeyInput').placeholder = 'sk-...';
            }
            
            if (provider !== 'demo') updateProviderHelp(provider);
        }
        
        function updateModeDisplay() {
            const { provider, apiKey } = state.aiSettings;
            const modeDisplay = document.getElementById('currentMode');
            const copilotIndicator = document.getElementById('aiModeIndicator');
            if (provider === 'demo' || !apiKey) {
                modeDisplay.textContent = 'Demo Mode';
                modeDisplay.className = 'status-badge demo';
                if (copilotIndicator) {
                    copilotIndicator.textContent = 'Demo Mode';
                    copilotIndicator.className = 'status-badge demo';
                }
            } else {
                modeDisplay.textContent = `AI: ${getProviderName(provider)}`;
                modeDisplay.className = 'status-badge active';
                if (copilotIndicator) {
                    copilotIndicator.textContent = `AI: ${getProviderName(provider)}`;
                    copilotIndicator.className = 'status-badge active';
                }
            }
        }
        
        function getProviderName(provider) {
            return { 
                openai: 'OpenAI GPT-5.2', 
                anthropic: 'Claude 3.5', 
                google: 'Gemini Flash', 
                ollama: 'Ollama',
                demo: 'Demo' 
            }[provider] || 'Unknown';
        }
        
        function navigate(page) {
            closeMobileMenu();
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            document.getElementById(page).classList.add('active');
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.querySelectorAll(`[onclick*="navigate('${page}')"]`).forEach(el => {
                if (el.classList.contains('nav-link')) el.classList.add('active');
            });
            state.currentPage = page;
            document.querySelector('.page-container').scrollTop = 0;
            if (page === 'copilot' && !state.sessionStart) {
                state.sessionStart = Date.now();
                startTimer();
            }
            updateModeDisplay();
        }
        
        const ui = {
            toggleContext: function(forceState) {
                const drawer = document.getElementById('context-drawer');
                const btn = document.getElementById('btnContext');
                const isOpen = drawer.classList.contains('open');
                const shouldOpen = forceState !== undefined ? forceState : !isOpen;
                if (shouldOpen) {
                    drawer.classList.add('open');
                    btn.classList.add('active');
                } else {
                    drawer.classList.remove('open');
                    btn.classList.remove('active');
                }
            }
        };
        
        state.saveContext = function() {
            state.contextResume = document.getElementById('ctx-resume').value;
            state.contextJD = document.getElementById('ctx-jd').value;
            const statusEl = document.getElementById('context-status');
            if (state.contextResume || state.contextJD) {
                statusEl.textContent = 'Context data saved';
                statusEl.style.color = 'var(--success)';
                localStorage.setItem('interviewace_ctx_resume', state.contextResume);
                localStorage.setItem('interviewace_ctx_jd', state.contextJD);
            } else {
                statusEl.textContent = 'No data saved';
                statusEl.style.color = 'var(--text-muted)';
                localStorage.removeItem('interviewace_ctx_resume');
                localStorage.removeItem('interviewace_ctx_jd');
            }
        };
        
        function loadContext() {
            const savedResume = localStorage.getItem('interviewace_ctx_resume');
            const savedJD = localStorage.getItem('interviewace_ctx_jd');
            if (savedResume) {
                document.getElementById('ctx-resume').value = savedResume;
                state.contextResume = savedResume;
            }
            if (savedJD) {
                document.getElementById('ctx-jd').value = savedJD;
                state.contextJD = savedJD;
            }
            if (savedResume || savedJD) {
                document.getElementById('context-status').textContent = 'Context loaded';
                document.getElementById('context-status').style.color = 'var(--success)';
            }
        }
        
        async function toggleListen() {
            const btn = document.getElementById('btnListen');
            const dot = document.getElementById('statusDot');
            const text = document.getElementById('statusText');
            if (!state.isListening) {
                try {
                    await navigator.mediaDevices.getUserMedia({ audio: true });
                } catch (err) {
                    alert('Microphone access required');
                    return;
                }
                if (!state.recognition) state.recognition = initSpeechRecognition();
                if (state.recognition) {
                    try {
                        state.recognition.start();
                        state.isListening = true;
                        btn.innerHTML = '<i class="fa-solid fa-microphone-lines"></i> Listening: ON';
                        btn.classList.add('active');
                        dot.classList.add('active');
                        text.classList.add('active');
                        text.textContent = 'Listening...';
                    } catch (e) {
                        console.error('Error:', e);
                    }
                }
            } else {
                state.isListening = false;
                if (state.recognition) state.recognition.stop();
                btn.innerHTML = '<i class="fa-solid fa-microphone"></i> Listening: OFF';
                btn.classList.remove('active');
                dot.classList.remove('active');
                text.classList.remove('active');
                text.textContent = 'Standby';
            }
        }
        
        function initSpeechRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) return null;
            const recognition = new SpeechRecognition();
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'en-US';
            recognition.onstart = () => {
                state.recognitionRunning = true;
                document.getElementById('voiceStatus').textContent = 'Yes';
            };
            recognition.onresult = (event) => {
                let finalTranscript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) finalTranscript += transcript + ' ';
                }
                if (finalTranscript) {
                    document.getElementById('queryInput').value = finalTranscript.trim();
                    clearTimeout(state.voiceTimeout);
                    state.voiceTimeout = setTimeout(() => {
                        if (document.getElementById('queryInput').value.trim()) sendQuery();
                    }, 1500);
                }
            };
            recognition.onend = () => {
                state.recognitionRunning = false;
                if (state.isListening) {
                    try {
                        recognition.start();
                    } catch (e) {
                        console.error('Error:', e);
                    }
                } else {
                    document.getElementById('voiceStatus').textContent = 'No';
                }
            };
            return recognition;
        }
        
        function toggleStealth() {
            state.stealthMode = !state.stealthMode;
            const btn = document.getElementById('btnStealth');
            if (state.stealthMode) {
                btn.innerHTML = '<i class="fa-solid fa-eye"></i> Stealth: ON';
                btn.classList.add('active');
                document.getElementById('stealthStatus').textContent = 'On';
                document.querySelector('.copilot-card').style.opacity = '0.3';
                addMessage('suggestion', 'Stealth Mode', '‚úì Interface opacity reduced');
            } else {
                btn.innerHTML = '<i class="fa-solid fa-eye-slash"></i> Stealth: OFF';
                btn.classList.remove('active');
                document.getElementById('stealthStatus').textContent = 'Off';
                document.querySelector('.copilot-card').style.opacity = '1';
            }
        }
        
        function cycleType() {
            state.interviewType = (state.interviewType + 1) % state.types.length;
            const icons = ['üíº', 'üíª', 'üìä', '‚öôÔ∏è'];
            document.getElementById('btnType').innerHTML = icons[state.interviewType] + ' ' + state.types[state.interviewType];
        }
        
        async function sendQuery() {
            const input = document.getElementById('queryInput');
            const query = input.value.trim();
            if (!query) return;
            addMessage('question', 'Your Question', query);
            state.questionCount++;
            document.getElementById('questionCount').textContent = state.questionCount;
            const loadingId = 'msg-' + Date.now();
            addMessage('suggestion', 'AI is thinking...', '<div class="loading" style="width: 20px; height: 20px; border-width: 3px;"></div>', loadingId);
            input.value = '';
            const { provider, apiKey } = state.aiSettings;
            if (provider !== 'demo' && apiKey) {
                try {
                    const answer = await callAI(query);
                    const msgEl = document.getElementById(loadingId);
                    if (msgEl) msgEl.remove();
                    addMessage('suggestion', 'AI Suggestion', answer);
                } catch (error) {
                    console.error('Error:', error);
                    const msgEl = document.getElementById(loadingId);
                    if (msgEl) msgEl.remove();
                    addMessage('suggestion', 'Error', 'API Error - ' + error.message);
                }
            } else {
                setTimeout(() => {
                    const msgEl = document.getElementById(loadingId);
                    if (msgEl) msgEl.remove();
                    addMessage('suggestion', 'Demo Response', getDemoResponse(query));
                }, 1500);
            }
        }
        
        async function callAI(query) {
            const { provider, apiKey, model } = state.aiSettings;
            let prompt = `You are an expert interview coach. Answer: ${query}`;
            if (state.contextResume) prompt += `\n\nCandidate Resume: ${state.contextResume}`;
            if (state.contextJD) prompt += `\n\nTarget JD: ${state.contextJD}`;
            
            if (provider === 'openai') {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${apiKey}` },
                    body: JSON.stringify({ 
                        model: model || 'gpt-5.2', 
                        messages: [{ role: 'user', content: prompt }], 
                        max_tokens: 800 
                    })
                });
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    const errorMsg = errorData.error?.message || errorData.error?.type || 'Unknown error';
                    const errorCode = errorData.error?.code || response.status;
                    
                    // Specific error messages
                    if (response.status === 401) {
                        throw new Error('Invalid API Key. Get a valid key from https://platform.openai.com/api-keys');
                    } else if (response.status === 429) {
                        throw new Error('Rate limit exceeded or no credits. Check your billing at https://platform.openai.com/account/billing');
                    } else if (errorMsg.includes('model') || errorMsg.includes('does not exist')) {
                        throw new Error(`Model "gpt-5.2" doesn't exist. Use a real model like: gpt-4-turbo, gpt-4, or gpt-3.5-turbo in the Custom Model field.`);
                    } else {
                        throw new Error(`OpenAI Error (${errorCode}): ${errorMsg}`);
                    }
                }
                const data = await response.json();
                return data.choices[0].message.content;
            } else if (provider === 'anthropic') {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json', 
                        'x-api-key': apiKey, 
                        'anthropic-version': '2023-06-01' 
                    },
                    body: JSON.stringify({ 
                        model: model || 'claude-3-5-sonnet-20241022', 
                        max_tokens: 1024, 
                        messages: [{ role: 'user', content: prompt }] 
                    })
                });
                if (!response.ok) throw new Error('Anthropic API failed');
                const data = await response.json();
                return data.content[0].text;
            } else if (provider === 'google') {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model || 'gemini-flash'}:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        contents: [{ parts: [{ text: prompt }] }], 
                        generationConfig: { temperature: 0.7, maxOutputTokens: 800 } 
                    })
                });
                if (!response.ok) throw new Error('Google API failed');
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } else if (provider === 'ollama') {
                // Ollama API endpoint (default: http://localhost:11434)
                const endpoint = apiKey || 'http://localhost:11434';
                try {
                    const response = await fetch(`${endpoint}/api/generate`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            model: model || 'llama3.2', 
                            prompt: prompt,
                            stream: false
                        })
                    });
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`Ollama API failed: ${response.status} - ${errorText}`);
                    }
                    const data = await response.json();
                    return data.response;
                } catch (error) {
                    if (error.message.includes('Failed to fetch') || error.name === 'TypeError') {
                        throw new Error('CORS Error: Start Ollama with CORS enabled using:\n\nLaunchAgents (macOS): OLLAMA_ORIGINS=* ollama serve\nSystemd (Linux): Environment="OLLAMA_ORIGINS=*"\nWindows: $env:OLLAMA_ORIGINS="*"; ollama serve\n\nOR use the API key field with a CORS proxy like:\nhttps://corsproxy.io/?http://localhost:11434');
                    }
                    throw error;
                }
            }
            throw new Error('Invalid provider');
        }
        
        function getDemoResponse(query) {
            const lower = query.toLowerCase();
            if (lower.includes('strength')) return 'Experienced in building scalable systems and mentoring teams. Proven track record of delivering complex projects on time.';
            if (lower.includes('weakness')) return 'I tend to be detail-oriented, sometimes slowing initial progress. I use timeboxing and agile methods to balance this.';
            if (lower.includes('why')) return 'Your company\'s mission aligns with my values. I\'m excited about your tech stack and growth opportunities.';
            if (lower.includes('achievement')) return 'Led migration from monolith to microservices, reducing deployment time from 2 hours to 15 minutes and saving $200k annually.';
            return 'Great question! Let me share my approach using the STAR method...';
        }
        
        function addMessage(type, label, text, id) {
            const msg = document.createElement('div');
            msg.className = 'message ' + type;
            if (id) msg.id = id;
            msg.innerHTML = '<div class="message-label">' + label + '</div><div class="message-text">' + text + '</div>';
            const container = document.getElementById('messages');
            container.prepend(msg);
            container.scrollTop = 0;
        }
        
        function quickAnswer(type) {
            const questions = {
                'strength': 'What is your greatest strength?',
                'weakness': 'What is your greatest weakness?',
                'why': 'Why do you want to work here?',
                'achievement': 'What is your biggest achievement?'
            };
            document.getElementById('queryInput').value = questions[type];
            sendQuery();
        }
        
        function startTimer() {
            setInterval(() => {
                if (state.sessionStart) {
                    const elapsed = Date.now() - state.sessionStart;
                    const mins = Math.floor(elapsed / 60000);
                    const secs = Math.floor((elapsed % 60000) / 1000);
                    document.getElementById('duration').textContent = String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
                }
            }, 1000);
        }
        
        // Resume Builder Functions
        function updateSlider(type) {
            if (type === 'variations') {
                state.variations = parseInt(document.getElementById('variationsSlider').value);
                document.getElementById('variationsValue').textContent = state.variations;
            } else if (type === 'pages') {
                state.pages = parseInt(document.getElementById('pagesSlider').value);
                document.getElementById('pagesValue').textContent = state.pages;
            }
        }
        
        function selectColorScheme(scheme) {
            state.selectedColorScheme = scheme;
            document.querySelectorAll('.color-scheme').forEach(el => el.classList.remove('active'));
            document.querySelector(`[data-scheme="${scheme}"]`).classList.add('active');
        }
        
        function selectTemplate(template) {
            state.selectedTemplate = template;
            document.querySelectorAll('.template-option').forEach(el => el.classList.remove('active'));
            document.querySelector(`[data-template="${template}"]`).classList.add('active');
        }
        
        async function toggleResumeVoice() {
            const btn = document.getElementById('resumeMicBtn');
            if (!state.isRecording) {
                try {
                    await navigator.mediaDevices.getUserMedia({ audio: true });
                } catch (err) {
                    alert('Microphone access required');
                    return;
                }
                if (!state.resumeRecognition) state.resumeRecognition = initResumeVoiceRecognition();
                if (state.resumeRecognition) {
                    try {
                        state.resumeRecognition.start();
                        state.isRecording = true;
                        btn.classList.add('recording');
                        btn.textContent = '‚èπÔ∏è';
                    } catch (e) {
                        alert('Voice recognition not supported');
                    }
                }
            } else {
                if (state.resumeRecognition) state.resumeRecognition.stop();
                state.isRecording = false;
                btn.classList.remove('recording');
                btn.textContent = 'üé§';
            }
        }
        
        function initResumeVoiceRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) return null;
            const recognition = new SpeechRecognition();
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'en-US';
            let finalTranscript = '';
            recognition.onresult = (event) => {
                let interimTranscript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript + ' ';
                    } else {
                        interimTranscript += transcript;
                    }
                }
                document.getElementById('resumeInput').value = finalTranscript + interimTranscript;
            };
            recognition.onend = () => {
                state.isRecording = false;
                document.getElementById('resumeMicBtn').classList.remove('recording');
                document.getElementById('resumeMicBtn').textContent = 'üé§';
            };
            return recognition;
        }
        
        async function generateResumes() {
            const input = document.getElementById('resumeInput').value.trim();
            const targetRole = document.getElementById('targetRole').value.trim();
            const category = document.getElementById('jobCategory').value;
            
            if (!input) {
                alert('Please provide your professional background');
                return;
            }
            
            document.getElementById('generatingOverlay').classList.add('active');
            document.getElementById('generatingText').textContent = 'üé® Generating Professional Resumes...';
            document.getElementById('resumesGrid').innerHTML = '';
            document.getElementById('statsBar').style.display = 'flex';
            
            const templates = getTemplatesToGenerate();
            
            for (let i = 0; i < state.variations; i++) {
                const progress = Math.round(((i + 1) / state.variations) * 100);
                document.getElementById('generatingProgress').textContent = `Generating resume ${i + 1} of ${state.variations}... (${progress}%)`;
                
                const template = templates[i % templates.length];
                await generateResumeCard(input, targetRole, category, i + 1, template);
                
                document.getElementById('generatedCount').textContent = i + 1;
                document.getElementById('variationsCount').textContent = state.variations;
                
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            const atsScore = calculateATSScore();
            document.getElementById('atsScore').textContent = atsScore + '%';
            
            document.getElementById('generatingOverlay').classList.remove('active');
        }
        
        function getTemplatesToGenerate() {
            const allTemplates = ['ats', 'modern', 'sidebar', 'executive', 'creative', 'compact'];
            if (state.selectedTemplate === 'ats') {
                return allTemplates;
            } else {
                const selected = [state.selectedTemplate];
                const others = allTemplates.filter(t => t !== state.selectedTemplate);
                return [...selected, ...others];
            }
        }
        
        function calculateATSScore() {
            return Math.floor(Math.random() * 15) + 85;
        }
        
        async function generateResumeCard(input, targetRole, category, index, templateType) {
            const colors = colorSchemes[state.selectedColorScheme];
            const resumeData = parseInput(input, targetRole, category);
            
            let resumeHTML = '';
            
            switch (templateType) {
                case 'ats':
                    resumeHTML = generateATSTemplate(resumeData, colors);
                    break;
                case 'modern':
                    resumeHTML = generateModernTemplate(resumeData, colors);
                    break;
                case 'sidebar':
                    resumeHTML = generateSidebarTemplate(resumeData, colors);
                    break;
                case 'executive':
                    resumeHTML = generateExecutiveTemplate(resumeData, colors);
                    break;
                case 'creative':
                    resumeHTML = generateCreativeTemplate(resumeData, colors);
                    break;
                case 'compact':
                    resumeHTML = generateCompactTemplate(resumeData, colors);
                    break;
            }
            
            const wrapper = document.createElement('div');
            wrapper.style.position = 'relative';
            
            const card = document.createElement('div');
            card.className = 'resume-card';
            card.id = `resume-${index}`;
            card.innerHTML = resumeHTML;
            
            const actions = document.createElement('div');
            actions.className = 'resume-actions';
            actions.innerHTML = `
                <button class="btn btn-primary" onclick="downloadPDF(${index})">
                    <i class="fa-solid fa-file-pdf"></i> PDF
                </button>
                <button class="btn btn-secondary" onclick="copyToClipboard(${index})">
                    <i class="fa-solid fa-copy"></i> Copy
                </button>
            `;
            
            wrapper.appendChild(card);
            wrapper.appendChild(actions);
            document.getElementById('resumesGrid').appendChild(wrapper);
        }
        
        function parseInput(input, targetRole, category) {
            const experienceMatch = input.match(/(\d+)\s*(?:years?|yrs?)/i);
            const yearsExp = experienceMatch ? experienceMatch[1] : '5';
            
            const skills = extractSkills(input, category);
            const achievements = extractAchievements(input);
            
            return {
                name: 'Alex Thompson',
                role: targetRole || 'Professional',
                email: 'alex.thompson@email.com',
                phone: '+1 (555) 123-4567',
                linkedin: 'linkedin.com/in/alexthompson',
                summary: generateSummary(input, targetRole, yearsExp),
                experience: generateExperience(input, yearsExp, category),
                education: generateEducation(category),
                skills: skills,
                achievements: achievements,
                yearsExp: yearsExp
            };
        }
        
        function extractSkills(input, category) {
            const categorySkills = {
                it: ['JavaScript', 'Python', 'React', 'Node.js', 'AWS', 'Docker', 'Kubernetes', 'CI/CD', 'Agile', 'Microservices'],
                engineering: ['CAD', 'SolidWorks', 'AutoCAD', 'MATLAB', 'Project Management', 'Quality Control', 'Lean Manufacturing'],
                sales: ['Sales Strategy', 'Client Relations', 'Negotiation', 'CRM', 'Lead Generation', 'Account Management', 'Revenue Growth'],
                marketing: ['Digital Marketing', 'SEO/SEM', 'Content Strategy', 'Social Media', 'Analytics', 'Campaign Management', 'Brand Strategy'],
                finance: ['Financial Analysis', 'Excel', 'QuickBooks', 'Forecasting', 'Budgeting', 'Tax Compliance', 'Risk Management'],
                hr: ['Recruitment', 'HRIS', 'Employee Relations', 'Performance Management', 'Compliance', 'Compensation', 'Training'],
                operations: ['Supply Chain', 'Inventory Management', 'Process Optimization', 'Vendor Management', 'Logistics', 'ERP'],
                healthcare: ['Patient Care', 'EMR/EHR', 'HIPAA Compliance', 'Clinical Documentation', 'Medical Terminology'],
                education: ['Curriculum Development', 'Classroom Management', 'Assessment', 'Educational Technology', 'Student Engagement'],
                creative: ['Adobe Creative Suite', 'UI/UX Design', 'Figma', 'Branding', 'Typography', 'Color Theory', 'Prototyping']
            };
            
            return categorySkills[category] || categorySkills.it;
        }
        
        function extractAchievements(input) {
            const achievements = [];
            const percentMatch = input.match(/(\d+)%/g);
            if (percentMatch) achievements.push(`Improved performance by ${percentMatch[0]}`);
            
            const costMatch = input.match(/\$(\d+)K/i);
            if (costMatch) achievements.push(`Reduced costs by ${costMatch[0]}`);
            
            const userMatch = input.match(/(\d+)M\+?\s*users/i);
            if (userMatch) achievements.push(`Built systems serving ${userMatch[0]}`);
            
            return achievements.length > 0 ? achievements : ['Exceeded performance targets consistently', 'Delivered projects on time and under budget'];
        }
        
        function generateSummary(input, role, years) {
            return `Results-driven ${role || 'Professional'} with ${years}+ years of experience delivering exceptional results. Proven track record of driving innovation, leading high-performing teams, and exceeding organizational goals. Expert in leveraging cutting-edge technologies and best practices to solve complex business challenges.`;
        }
        
        function generateExperience(input, years, category) {
            const companies = {
                it: ['Tech Innovations Inc', 'Digital Solutions Corp', 'CloudScale Systems'],
                engineering: ['Advanced Manufacturing Co', 'Engineering Solutions Inc', 'Industrial Systems Corp'],
                sales: ['Global Sales Group', 'Revenue Partners Inc', 'Business Growth Corp'],
                marketing: ['Marketing Dynamics', 'Brand Strategies Inc', 'Digital Media Group'],
                finance: ['Financial Services Corp', 'Investment Partners LLC', 'Capital Management Inc'],
                hr: ['Human Capital Solutions', 'Talent Management Group', 'HR Innovations Inc'],
                operations: ['Supply Chain Solutions', 'Operations Excellence Corp', 'Logistics Partners Inc'],
                healthcare: ['Healthcare Systems Inc', 'Medical Solutions Group', 'Patient Care Partners'],
                education: ['Educational Institute', 'Learning Center', 'Academic Excellence School'],
                creative: ['Creative Studios', 'Design Innovations', 'Brand Creative Agency']
            };
            
            const companyList = companies[category] || companies.it;
            
            return [
                {
                    title: 'Senior Professional',
                    company: companyList[0],
                    period: '2022 - Present',
                    achievements: [
                        'Led cross-functional teams of 10+ members to deliver strategic initiatives',
                        'Achieved 35% improvement in key performance metrics',
                        'Implemented innovative solutions reducing operational costs by $250K annually',
                        'Mentored junior team members, improving team productivity by 40%'
                    ]
                },
                {
                    title: 'Mid-Level Professional',
                    company: companyList[1],
                    period: '2019 - 2022',
                    achievements: [
                        'Managed portfolio of high-value projects with 95% success rate',
                        'Collaborated with stakeholders to drive business objectives',
                        'Optimized workflows resulting in 25% efficiency gains',
                        'Received Employee of the Year award for outstanding performance'
                    ]
                }
            ];
        }
        
        function generateEducation(category) {
            const degrees = {
                it: 'Bachelor of Science in Computer Science',
                engineering: 'Bachelor of Engineering',
                sales: 'Bachelor of Business Administration',
                marketing: 'Bachelor of Marketing',
                finance: 'Bachelor of Finance & Accounting',
                hr: 'Bachelor of Human Resource Management',
                operations: 'Bachelor of Operations Management',
                healthcare: 'Bachelor of Healthcare Administration',
                education: 'Bachelor of Education',
                creative: 'Bachelor of Fine Arts'
            };
            
            return {
                degree: degrees[category] || 'Bachelor of Science',
                school: 'State University',
                year: '2018',
                gpa: '3.8/4.0'
            };
        }
        
        // Template Generators (kept concise for file size)
        function generateATSTemplate(data, colors) {
            return `<div style="padding:2.5rem;font-family:Arial,sans-serif;background:#fff;color:#000;line-height:1.6"><div style="text-align:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid ${colors.primary}"><div style="font-size:32px;font-weight:bold;color:${colors.primary}">${data.name.toUpperCase()}</div><div style="font-size:14px;color:#555;margin-top:0.5rem">${data.role}</div><div style="font-size:11px;color:#666;margin-top:0.5rem">${data.email} | ${data.phone} | ${data.linkedin}</div></div><div style="margin-bottom:1.5rem"><div style="font-size:13px;font-weight:bold;color:${colors.primary};text-transform:uppercase;border-bottom:1px solid #ddd;padding-bottom:0.3rem;margin-bottom:0.75rem">Professional Summary</div><div style="font-size:11px;line-height:1.7;color:#333">${data.summary}</div></div><div style="margin-bottom:1.5rem"><div style="font-size:13px;font-weight:bold;color:${colors.primary};text-transform:uppercase;border-bottom:1px solid #ddd;padding-bottom:0.3rem;margin-bottom:0.75rem">Professional Experience</div>${data.experience.map(exp => `<div style="margin-bottom:1.25rem"><div style="display:flex;justify-content:space-between;margin-bottom:0.25rem"><div style="font-weight:bold;font-size:12px">${exp.title}</div><div style="font-size:11px;color:#666">${exp.period}</div></div><div style="font-size:11px;color:#666;margin-bottom:0.5rem">${exp.company}</div><ul style="margin:0;padding-left:1.25rem;font-size:11px;line-height:1.6;color:#333">${exp.achievements.map(ach => `<li>${ach}</li>`).join('')}</ul></div>`).join('')}</div><div style="margin-bottom:1.5rem"><div style="font-size:13px;font-weight:bold;color:${colors.primary};text-transform:uppercase;border-bottom:1px solid #ddd;padding-bottom:0.3rem;margin-bottom:0.75rem">Core Competencies</div><div style="font-size:11px;line-height:2;color:#333">${data.skills.join(' ‚Ä¢ ')}</div></div><div><div style="font-size:13px;font-weight:bold;color:${colors.primary};text-transform:uppercase;border-bottom:1px solid #ddd;padding-bottom:0.3rem;margin-bottom:0.75rem">Education</div><div style="font-weight:bold;font-size:12px">${data.education.degree}</div><div style="font-size:11px;color:#666">${data.education.school} | ${data.education.year} | GPA: ${data.education.gpa}</div></div></div>`;
        }
        
        function generateModernTemplate(data, colors) {
            return `<div style="padding:2rem;background:linear-gradient(135deg,#f5f5f5 0%,#fff 100%);font-family:'Segoe UI',Arial,sans-serif"><div style="margin-bottom:2rem;padding-bottom:1rem;border-bottom:3px solid ${colors.primary}"><div style="font-size:28px;font-weight:700;color:${colors.primary}">${data.name}</div><div style="font-size:14px;color:#555;margin-top:0.25rem">${data.role}</div><div style="font-size:10px;color:#777;margin-top:0.5rem">${data.email} ‚Ä¢ ${data.phone}</div></div><div style="background:#fff;border-left:4px solid ${colors.primary};padding:1.25rem;margin-bottom:1.25rem;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,0.05)"><div style="font-size:12px;font-weight:700;color:${colors.primary};text-transform:uppercase;margin-bottom:0.75rem">About</div><div style="font-size:11px;line-height:1.7;color:#333">${data.summary}</div></div><div style="background:#fff;border-left:4px solid ${colors.secondary};padding:1.25rem;margin-bottom:1.25rem;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,0.05)"><div style="font-size:12px;font-weight:700;color:${colors.primary};text-transform:uppercase;margin-bottom:1rem">Experience</div>${data.experience.map(exp => `<div style="margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #eee"><div style="display:flex;justify-content:space-between;margin-bottom:0.25rem"><div style="font-weight:600;font-size:11px">${exp.title}</div><div style="font-size:10px;color:#999">${exp.period}</div></div><div style="font-size:10px;color:#666;margin-bottom:0.5rem">${exp.company}</div><ul style="margin:0;padding-left:1.1rem;font-size:10px;line-height:1.6;color:#333">${exp.achievements.map(ach => `<li>${ach}</li>`).join('')}</ul></div>`).join('')}</div><div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem"><div style="background:#fff;border-left:4px solid ${colors.secondary};padding:1.25rem;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,0.05)"><div style="font-size:12px;font-weight:700;color:${colors.primary};text-transform:uppercase;margin-bottom:0.75rem">Skills</div><div style="font-size:10px;line-height:1.8;color:#333">${data.skills.slice(0,6).join(' ‚Ä¢ ')}</div></div><div style="background:#fff;border-left:4px solid ${colors.primary};padding:1.25rem;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,0.05)"><div style="font-size:12px;font-weight:700;color:${colors.primary};text-transform:uppercase;margin-bottom:0.75rem">Education</div><div style="font-weight:600;font-size:11px">${data.education.degree}</div><div style="font-size:10px;color:#666">${data.education.school} | ${data.education.year}</div></div></div></div>`;
        }
        
        function generateSidebarTemplate(data, colors) {
            return `<div style="display:grid;grid-template-columns:260px 1fr;min-height:100%;font-family:Arial,sans-serif;background:#fff"><div style="background:${colors.primary};color:#fff;padding:2rem 1.5rem"><div style="margin-bottom:2rem;text-align:center"><div style="font-size:28px;font-weight:bold;margin-bottom:0.5rem;color:${colors.accent}">${data.name.split(' ').map(n => n[0]).join('')}</div><div style="font-size:10px;color:rgba(255,255,255,0.7);text-transform:uppercase">${data.role}</div></div><div style="margin-bottom:2rem"><div style="font-size:11px;color:${colors.accent};font-weight:bold;margin-bottom:1rem;text-transform:uppercase">Contact</div><div style="font-size:9px;line-height:2;color:rgba(255,255,255,0.9)">üìß ${data.email}<br>üì± ${data.phone}<br>üîó ${data.linkedin}</div></div><div><div style="font-size:11px;color:${colors.accent};font-weight:bold;margin-bottom:1rem;text-transform:uppercase">Skills</div><div style="font-size:9px;line-height:2;color:rgba(255,255,255,0.9)">${data.skills.slice(0,8).map(skill => `‚Ä¢ ${skill}`).join('<br>')}</div></div></div><div style="padding:2rem 2.5rem"><div style="margin-bottom:1.5rem"><div style="font-size:26px;font-weight:bold;color:#1a1a1a">${data.name}</div><div style="font-size:13px;color:#666">${data.role}</div></div><div style="margin-bottom:1.5rem"><div style="font-size:12px;font-weight:bold;color:${colors.primary};text-transform:uppercase;margin-bottom:0.75rem">Summary</div><div style="font-size:11px;line-height:1.7;color:#333">${data.summary}</div></div><div style="margin-bottom:1.5rem"><div style="font-size:12px;font-weight:bold;color:${colors.primary};text-transform:uppercase;margin-bottom:1rem">Experience</div>${data.experience.map(exp => `<div style="margin-bottom:1.25rem"><div style="font-weight:bold;font-size:11px">${exp.title} ‚Ä¢ ${exp.company}</div><div style="font-size:10px;color:#666;margin-bottom:0.5rem">${exp.period}</div><ul style="margin:0;padding-left:1.2rem;font-size:10px;line-height:1.6;color:#333">${exp.achievements.map(ach => `<li>${ach}</li>`).join('')}</ul></div>`).join('')}</div><div><div style="font-size:12px;font-weight:bold;color:${colors.primary};text-transform:uppercase;margin-bottom:0.75rem">Education</div><div style="font-weight:bold;font-size:11px">${data.education.degree}</div><div style="font-size:10px;color:#666">${data.education.school} | ${data.education.year}</div></div></div></div>`;
        }
        
        function generateExecutiveTemplate(data, colors) {
            return `<div style="padding:2.5rem 3rem;font-family:Georgia,serif;background:#fff;color:#000"><div style="text-align:center;margin-bottom:2.5rem;padding-bottom:1.5rem;border-bottom:4px double ${colors.primary}"><div style="font-size:36px;font-weight:bold;letter-spacing:2px;color:${colors.primary}">${data.name.toUpperCase()}</div><div style="font-size:14px;color:#555;margin-top:0.75rem;letter-spacing:1px">${data.role}</div><div style="font-size:11px;color:#666;margin-top:0.75rem">${data.email} | ${data.phone} | ${data.linkedin}</div></div><div style="margin-bottom:2rem;padding:1.5rem;background:#f9f9f9;border-left:4px solid ${colors.primary}"><div style="font-size:11px;line-height:1.8;color:#333;font-style:italic">${data.summary}</div></div><div style="margin-bottom:2rem"><div style="font-size:14px;font-weight:bold;color:${colors.primary};text-transform:uppercase;letter-spacing:1px;border-bottom:2px solid ${colors.primary};padding-bottom:0.5rem;margin-bottom:1.25rem">Executive Experience</div>${data.experience.map(exp => `<div style="margin-bottom:1.75rem"><div style="display:flex;justify-content:space-between;margin-bottom:0.5rem"><div style="font-weight:bold;font-size:13px;color:${colors.primary}">${exp.title}</div><div style="font-size:11px;color:#666;font-style:italic">${exp.period}</div></div><div style="font-size:12px;color:#666;margin-bottom:0.75rem">${exp.company}</div><ul style="margin:0;padding-left:1.5rem;font-size:11px;line-height:1.8;color:#333">${exp.achievements.map(ach => `<li>${ach}</li>`).join('')}</ul></div>`).join('')}</div><div style="display:grid;grid-template-columns:2fr 1fr;gap:2rem"><div><div style="font-size:14px;font-weight:bold;color:${colors.primary};text-transform:uppercase;letter-spacing:1px;border-bottom:2px solid ${colors.primary};padding-bottom:0.5rem;margin-bottom:1rem">Core Competencies</div><div style="font-size:11px;line-height:2;color:#333">${data.skills.join(' ‚Ä¢ ')}</div></div><div><div style="font-size:14px;font-weight:bold;color:${colors.primary};text-transform:uppercase;letter-spacing:1px;border-bottom:2px solid ${colors.primary};padding-bottom:0.5rem;margin-bottom:1rem">Education</div><div style="font-weight:bold;font-size:12px">${data.education.degree}</div><div style="font-size:11px;color:#666;margin-top:0.25rem">${data.education.school}</div><div style="font-size:10px;color:#999;margin-top:0.25rem">${data.education.year}</div></div></div></div>`;
        }
        
        function generateCreativeTemplate(data, colors) {
            return `<div style="padding:2rem;background:linear-gradient(135deg,${colors.accent} 0%,#fff 100%);font-family:Helvetica,sans-serif"><div style="background:#fff;padding:2rem;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.12)"><div style="margin-bottom:2rem;padding:1.5rem;background:linear-gradient(135deg,${colors.primary},${colors.secondary});border-radius:8px;color:#fff"><div style="font-size:30px;font-weight:700">${data.name}</div><div style="font-size:14px;margin-top:0.5rem;opacity:0.9">${data.role}</div><div style="font-size:10px;margin-top:0.75rem;opacity:0.8">${data.email} ‚Ä¢ ${data.phone}</div></div><div style="margin-bottom:1.5rem;padding:1.25rem;background:#f8f9fa;border-radius:8px;border-left:4px solid ${colors.primary}"><div style="font-size:11px;line-height:1.7;color:#333">${data.summary}</div></div><div style="margin-bottom:1.5rem"><div style="font-size:13px;font-weight:700;color:${colors.primary};margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem"><div style="width:30px;height:3px;background:${colors.primary};border-radius:2px"></div>Experience</div>${data.experience.map(exp => `<div style="margin-bottom:1.25rem;padding:1rem;background:#f8f9fa;border-radius:6px"><div style="display:flex;justify-content:space-between;margin-bottom:0.25rem"><div style="font-weight:600;font-size:11px;color:${colors.primary}">${exp.title}</div><div style="font-size:10px;color:#999">${exp.period}</div></div><div style="font-size:10px;color:#666;margin-bottom:0.5rem">${exp.company}</div><ul style="margin:0;padding-left:1.1rem;font-size:10px;line-height:1.6;color:#333">${exp.achievements.map(ach => `<li>${ach}</li>`).join('')}</ul></div>`).join('')}</div><div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem"><div style="padding:1rem;background:linear-gradient(135deg,${colors.primary}15,${colors.secondary}15);border-radius:6px"><div style="font-size:12px;font-weight:700;color:${colors.primary};margin-bottom:0.75rem">Skills</div><div style="font-size:10px;line-height:1.8;color:#333">${data.skills.slice(0,6).join(' ‚Ä¢ ')}</div></div><div style="padding:1rem;background:#f8f9fa;border-radius:6px"><div style="font-size:12px;font-weight:700;color:${colors.primary};margin-bottom:0.75rem">Education</div><div style="font-weight:600;font-size:11px">${data.education.degree}</div><div style="font-size:10px;color:#666;margin-top:0.25rem">${data.education.school} | ${data.education.year}</div></div></div></div></div>`;
        }
        
        function generateCompactTemplate(data, colors) {
            return `<div style="padding:1.5rem 2rem;font-family:Arial,sans-serif;background:#fff;color:#000"><div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:3px solid ${colors.primary}"><div><div style="font-size:24px;font-weight:bold;color:${colors.primary}">${data.name}</div><div style="font-size:12px;color:#555;margin-top:0.25rem">${data.role}</div></div><div style="text-align:right;font-size:9px;color:#666;line-height:1.6">${data.email}<br>${data.phone}<br>${data.linkedin}</div></div><div style="margin-bottom:1.25rem"><div style="font-size:11px;font-weight:bold;color:${colors.primary};margin-bottom:0.5rem">PROFILE</div><div style="font-size:10px;line-height:1.6;color:#333">${data.summary}</div></div><div style="margin-bottom:1.25rem"><div style="font-size:11px;font-weight:bold;color:${colors.primary};margin-bottom:0.75rem">EXPERIENCE</div>${data.experience.map(exp => `<div style="margin-bottom:1rem"><div style="display:flex;justify-content:space-between;font-size:10px;margin-bottom:0.2rem"><div style="font-weight:bold">${exp.title} | ${exp.company}</div><div style="color:#666;font-size:9px">${exp.period}</div></div><ul style="margin:0;padding-left:1rem;font-size:9px;line-height:1.5;color:#333">${exp.achievements.slice(0,3).map(ach => `<li>${ach}</li>`).join('')}</ul></div>`).join('')}</div><div style="display:grid;grid-template-columns:2fr 1fr;gap:1.5rem"><div><div style="font-size:11px;font-weight:bold;color:${colors.primary};margin-bottom:0.5rem">SKILLS</div><div style="font-size:9px;line-height:1.8;color:#333">${data.skills.join(' ‚Ä¢ ')}</div></div><div><div style="font-size:11px;font-weight:bold;color:${colors.primary};margin-bottom:0.5rem">EDUCATION</div><div style="font-weight:bold;font-size:10px">${data.education.degree}</div><div style="font-size:9px;color:#666">${data.education.school}, ${data.education.year}</div></div></div></div>`;
        }
        
        async function downloadPDF(index) {
            const element = document.getElementById(`resume-${index}`);
            const opt = {
                margin: 0,
                filename: `resume-${index}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            
            try {
                await html2pdf().set(opt).from(element).save();
            } catch (error) {
                console.error('PDF generation failed:', error);
                alert('PDF download failed. Please try copying the resume instead.');
            }
        }
        
        function copyToClipboard(index) {
            const element = document.getElementById(`resume-${index}`);
            const range = document.createRange();
            range.selectNode(element);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            alert('Resume copied to clipboard!');
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            loadContext();
            document.getElementById('queryInput').addEventListener('keypress', e => {
                if (e.key === 'Enter') sendQuery();
            });
            document.addEventListener('keydown', e => {
                if (e.key === 'Escape') {
                    if (document.getElementById('settingsOverlay').classList.contains('active')) {
                        closeSettings();
                    } else if (document.getElementById('context-drawer').classList.contains('open')) {
                        ui.toggleContext(false);
                    }
                }
            });
            document.getElementById('settingsOverlay').addEventListener('click', e => {
                if (e.target.id === 'settingsOverlay') closeSettings();
            });
        });
    </script>
</body>
</html>
